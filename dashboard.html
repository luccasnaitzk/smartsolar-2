<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SmartSolar - Dashboard</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="src/styles/dashboard.css">
</head>
<body data-theme="dark">
<div class="animated-bg">
  <div class="animated-particles">
    <div class="animated-particle p1"></div>
    <div class="animated-particle p2"></div>
    <div class="animated-particle p3"></div>
    <div class="animated-particle p4"></div>
    <div class="animated-particle p5"></div>
  </div>
</div>
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <h1><i class="fas fa-bolt"></i> SmartSolar</h1>
    </div>
    <div class="sidebar-menu">
      <button class="tab active" data-section="dashboard">
        <i class="fas fa-chart-line"></i> Dashboard
      </button>
      <button class="tab" data-section="monitoramento">
        <i class="fas fa-desktop"></i> Monitoramento
      </button>
      <button class="tab" data-section="clima">
        <i class="fas fa-cloud-sun"></i> Clima
      </button>
      <button class="tab" data-section="relatorios">
        <i class="fas fa-file-alt"></i> Relat√≥rios
      </button>
      <button class="tab" data-section="placas">
        <i class="fas fa-solar-panel"></i> Placas
      </button>
      <button class="tab" data-section="alertas">
        <i class="fas fa-bell"></i> Alertas
      </button>
      <button class="tab" data-section="usuarios">
        <i class="fas fa-users"></i> Usu√°rios
      </button>
      <button class="tab" data-section="configuracoes">
        <i class="fas fa-cog"></i> Configura√ß√µes
      </button>
    </div>
    <div class="sidebar-footer">
      <div class="user-menu" id="userMenu">
        <img src="https://ui-avatars.com/api/?name=Usuario&background=00d4ff&color=fff" alt="Usu√°rio">
        <span>Usu√°rio</span>
      </div>
    </div>
    <footer style="width:100%; position:fixed; left:0; bottom:0; background:#1e1e2f; color:#00d4ff; text-align:center; padding:0.1rem 0 0 0; font-size:1.1rem; letter-spacing:0.5px; z-index:999;">
      <span style="font-weight:600;">SmartSolar ¬© <span id="year"></span> - Todos os direitos reservados</span>
      <script>
        document.addEventListener('DOMContentLoaded', function() {
          const footer = document.querySelector('footer');
          footer.style.display = 'none';
          window.addEventListener('scroll', function() {
            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 2) {
              footer.style.display = 'block';
            } else {
              footer.style.display = 'none';
            }
          });
        });
      </script>
    </footer>
    </div>
  </div>
  <!-- Conte√∫do Principal -->
  <div class="main-content">
    <!-- Header -->
    <header>
      <div class="header-left">
        <h2 id="pageTitle">Dashboard</h2>
      </div>
      <div class="header-right">
        <div class="weather-info">
          <i class="fas fa-cloud-sun" title="Clima"></i>
          <span>28¬∞C ‚Ä¢ <i class="fas fa-tint" title="Umidade"></i> 45%</span>
        </div>
  <button id="darkToggle" class="theme-toggle">üåô</button>
        
        <span id="headerTime" style="margin-left:1rem;font-weight:600;color:#00d4ff;font-size:1.1rem;border:2px solid #00d4ff;border-radius:8px;padding:0.3rem 1rem;display:inline-flex;align-items:center;gap:0.5rem;background:#18192b;">
          <i class="fas fa-clock" style="color:#00d4ff;font-size:1.1rem;"></i>
          <span id="headerTimeValue"></span>
        </span>
        <button id="logoutBtn" class="logout-btn" title="Sair" style="margin-left:0.7rem; background:#e63946; color:#fff; border:none; border-radius:8px; padding:0.5rem 1.1rem; font-size:1rem; cursor:pointer; transition:background 0.2s;">
          <i class="fas fa-sign-out-alt"></i> Sair
        </button>
      </div>
    </header>

    <main>
      <!-- DASHBOARD -->
      <section id="section-dashboard">
        <div class="dashboard-header">
          <div style="display: flex; align-items: center; gap: 1rem;">
            <h2>üìä Vis√£o Geral do Sistema</h2>
            <button id="toggleView" class="toggle-view-btn" title="Alternar para vis√£o de placas">
              <i class="fas fa-chevron-right"></i>
            </button>
          </div>
          <div id="placaMiniSelect" class="placa-mini-select" style="display:none; margin-top:1rem;"></div>
          <div class="time-filter">
            <button class="filter-btn active"><i class="fas fa-calendar-day"></i> Hoje</button>
            <button class="filter-btn"><i class="fas fa-calendar-week"></i> Semana</button>
            <button class="filter-btn"><i class="fas fa-calendar-alt"></i> M√™s</button>
          </div>
        </div>

        <!-- KPIs Principais -->
        <div class="grid">
          <div class="card kpi">
            <div class="kpi-icon" style="background: rgba(0, 212, 255, 0.2);">
              <i class="fas fa-sun" style="color: #00d4ff;"></i>
            </div>
            <div class="kpi-content">
              <h3>Gera√ß√£o Atual</h3>
              <p id="powerNow">0.0 kW</p>
              <span class="kpi-trend up"><i class="fas fa-arrow-up"></i> 12%</span>
              <div class="kpi-spark"><canvas id="spark-powerNow"></canvas></div>
            </div>
          </div>
          
          <div class="card kpi">
            <div class="kpi-icon" style="background: rgba(255, 204, 0, 0.2);">
              <i class="fas fa-bolt" style="color: #ffcc00;"></i>
            </div>
            <div class="kpi-content">
              <h3>Consumo Atual</h3>
              <p id="loadNow">0.0 kW</p>
              <span class="kpi-trend down"><i class="fas fa-arrow-down"></i> 5%</span>
              <div class="kpi-spark"><canvas id="spark-loadNow"></canvas></div>
            </div>
          </div>
          
          <div class="card kpi">
            <div class="kpi-icon" style="background: rgba(67, 97, 238, 0.2);">
              <i class="fas fa-plug" style="color: #4361ee;"></i>
            </div>
            <div class="kpi-content">
              <h3>Energia Hoje</h3>
              <p id="energyToday">0.0 kWh</p>
              <span class="kpi-trend up"><i class="fas fa-arrow-up"></i> 8%</span>
              <div class="kpi-spark"><canvas id="spark-energyToday"></canvas></div>
            </div>
          </div>
          
          <div class="card kpi">
            <div class="kpi-icon" style="background: rgba(42, 157, 143, 0.2);">
              <i class="fas fa-dollar-sign" style="color: #2a9d8f;"></i>
            </div>
            <div class="kpi-content">
              <h3>Economia Di√°ria</h3>
              <p id="revenueToday">R$ 0,00</p>
              <span class="kpi-trend up"><i class="fas fa-arrow-up"></i> 15%</span>
              <div class="kpi-spark"><canvas id="spark-revenueToday"></canvas></div>
            </div>
          </div>
        </div>
        <!-- Gr√°ficos e Detalhes -->
        <div class="grid large">
          <div class="card">
            <div class="card-header" style="display:flex; align-items:center; gap:1rem; justify-content:space-between; position:relative;">
              <div style="display:flex; align-items:center; gap:0.7rem;">
                <span class="potencia-icon" style="background:linear-gradient(135deg,#00d4ff 60%,#4361ee 100%); border-radius:50%; padding:0.7rem; box-shadow:0 2px 12px rgba(0,212,255,0.15);">
                  <i class="fas fa-bolt" style="
                    font-size:2.7rem;
                    color:#fff;
                    background: linear-gradient(135deg, #f8ffae 0%, #43c6ac 100%);
                    border-radius: 50%;
                    box-shadow: 0 4px 24px rgba(67,198,172,0.18);
                    padding: 0.5rem;
                    animation: energiaPulse 1.2s infinite alternate;
                  "></i>
                </span>
                <h3 style="font-size:1.25rem; font-weight:600; color:#00d4ff; letter-spacing:0.5px;">Pot√™ncia Instant√¢nea</h3>
              </div>
              <span class="potencia-ao-vivo" title="Valor atualizado em tempo real">Ao vivo</span>
            </div>
            <div class="potencia-valor-container" style="display:flex; flex-direction:column; align-items:center; justify-content:center; margin-top:1.2rem;">
              <span id="gaugeValue" class="gauge-potencia-value">
                0.0 kW
              </span>
            </div>
          </div>

          
          <div class="card">
            <div class="card-header">
              <h3>Gera√ß√£o vs Consumo</h3>
              <div class="chart-container">
                <canvas id="realtimeChart"></canvas>
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <h3>Detalhes de Performance</h3>
              <div class="performance-details">
                <div class="performance-item">
                  <span class="performance-icon"><i class="fas fa-tachometer-alt"></i></span>
                  <span class="performance-label">Efici√™ncia do Sistema</span>
                  <span class="performance-value" id="efficiency">0%</span>
                </div>
                <div class="performance-item">
                  <span class="performance-icon"><i class="fas fa-leaf"></i></span>
                  <span class="performance-label">CO‚ÇÇ Evitado Hoje</span>
                  <span class="performance-value" id="co2Saved">0 kg</span>
                </div>
                <div class="performance-item">
                  <span class="performance-icon"><i class="fas fa-solar-panel"></i></span>
                  <span class="performance-label">Placas Ativas</span>
                  <span class="performance-value" id="totalPlacas">0</span>
                </div>
                <div class="performance-item">
                  <span class="performance-icon"><i class="fas fa-bolt"></i></span>
                  <span class="performance-label">Pot√™ncia Total</span>
                  <span class="performance-value" id="potenciaTotal">0 kWp</span>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Informa√ß√µes Adicionais -->
        <div class="grid" style="display: flex; gap: 2rem; align-items: stretch;">
          <div class="card" style="flex: 1;">
            <div class="card-header">
              <h3>Produ√ß√£o Semanal</h3>
              <div class="chart-container">
                <canvas id="dailyBarChart" width="200" height="80"></canvas>
              </div>
            </div>
          </div>
          <div class="card" style="flex: 1;">
            <div class="card-header">
              <h3>Status das Placas</h3>
              <div class="chart-container">
                <canvas id="placaDoughnut"></canvas>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- MONITORAMENTO EM TEMPO REAL -->
      <section id="section-monitoramento" hidden>
        <h2>üì° Monitoramento em Tempo Real</h2>
        <div class="grid large">
          <div class="card">
            <h3>Gera√ß√£o de Energia</h3>
            <div class="chart-container">
              <canvas id="monitoringChart"></canvas>
            </div>
          </div>
          <div class="card">
            <h3>Detalhes de Opera√ß√£o</h3>
            <div class="performance-details">
              <div class="performance-item">
                <span class="performance-icon"><i class="fas fa-battery-full"></i></span>
                <span class="performance-label">Tens√£o DC</span>
                <span class="performance-value">320.5 V</span>
              </div>
              <div class="performance-item">
                <span class="performance-icon"><i class="fas fa-bolt"></i></span>
                <span class="performance-label">Corrente DC</span>
                <span class="performance-value">15.8 A</span>
              </div>
              <div class="performance-item">
                <span class="performance-icon"><i class="fas fa-plug"></i></span>
                <span class="performance-label">Tens√£o AC</span>
                <span class="performance-value">220.3 V</span>
              </div>
              <div class="performance-item">
                <span class="performance-icon"><i class="fas fa-wave-square"></i></span>
                <span class="performance-label">Frequ√™ncia</span>
                <span class="performance-value">60.0 Hz</span>
              </div>
              <div class="performance-item">
                <span class="performance-icon"><i class="fas fa-thermometer-half"></i></span>
                <span class="performance-label">Temperatura</span>
                <span class="performance-value">42.5 ¬∞C</span>
              </div>
            </div>
          </div>
        </div>
      </section>


      <!-- CLIMA -->
      <section id="section-clima" hidden>
        <h2>üå§Ô∏è Condi√ß√µes Clim√°ticas</h2>
        <div class="grid">
          <div class="card">
            <h3>Previs√£o do Tempo</h3>
            <div class="weather-card">
              <div class="weather-current">
                <div class="weather-icon">
                  <i class="fas fa-sun"></i>
                </div>
                <div class="weather-details">
                  <h4>Hoje</h4>
                  <div class="temperature">28¬∞C</div>
                  <div class="condition">Ensolarado</div>
                </div>
              </div>
              <div class="weather-stats">
                <div class="weather-stat">
                  <i class="fas fa-wind"></i>
                  <span>15 km/h</span>
                </div>
                <div class="weather-stat">
                  <i class="fas fa-tint"></i>
                  <span>45%</span>
                </div>
                <div class="weather-stat">
                  <i class="fas fa-compress-alt"></i>
                  <span>1015 hPa</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="card">
            <h3>Radia√ß√£o Solar</h3>
            <div class="chart-container">
              <canvas id="solarRadiationChart"></canvas>
            </div>
          </div>
          
          <div class="card">
            <h3>Previs√£o para Amanh√£</h3>
            <div class="weather-forecast">
              <div class="forecast-item">
                <div class="forecast-day">Amanh√£</div>
                <div class="forecast-icon">
                  <i class="fas fa-cloud-sun"></i>
                </div>
                <div class="forecast-temp">26¬∞C</div>
              </div>
              <div class="forecast-details">
                <p>Parcialmente nublado com possibilidade de chuvas isoladas no final da tarde.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- RELAT√ìRIOS -->
      <section id="section-relatorios" hidden>
        <h2>üìë Relat√≥rios</h2>
        <form id="reportForm">
          <label>In√≠cio: <input type="date" id="dateStart" required></label>
          <label>Fim: <input type="date" id="dateEnd" required></label>
          <button type="submit" class="btn-primary">Gerar</button>
        </form>
        <div id="reportBox">
          <table id="reportsTable">
            <thead>
              <tr>
                <th>Data</th>
                <th>Tipo</th>
                <th>Descri√ß√£o</th>
                <th>Valor</th>
              </tr>
            </thead>
            <tbody>
              <!-- Relat√≥rios ser√£o inseridos aqui via JS -->
            </tbody>
          </table>
        </div>
        <button id="exportCsv" class="btn-exportar"><i class="fas fa-file-export"></i> Exportar CSV</button>
      </section>

      <!-- PLACAS -->
      <section id="section-placas" hidden>
        <h2>üîã Gerenciamento de Placas</h2>
        <form id="placaForm" novalidate>
          <div class="form-row">
            <label for="placaNome"><i class="fas fa-tag"></i> Nome da placa</label>
            <input type="text" id="placaNome" name="placaNome" placeholder="Ex.: Placa 04" minlength="2" maxlength="40" required>
            <small class="field-hint">Use um nome curto e √∫nico.</small>
            <small class="field-error" id="placaNomeError" hidden></small>
          </div>
          <div class="form-row">
            <label for="placaPotencia"><i class="fas fa-bolt"></i> Pot√™ncia</label>
            <div class="input-with-unit">
              <input type="number" id="placaPotencia" name="placaPotencia" placeholder="Ex.: 2.50" step="0.01" min="0.05" max="50" required inputmode="decimal">
              <span class="unit">kWp</span>
            </div>
            <small class="field-hint">Se informar em Watts (ex.: 5000), converteremos para kWp automaticamente.</small>
            <small class="field-error" id="placaPotenciaError" hidden></small>
          </div>
          <div class="form-row">
            <label for="placaStatus"><i class="fas fa-circle-notch"></i> Status</label>
            <select id="placaStatus" name="placaStatus" required>
              <option value="Ativa">Ativa</option>
              <option value="Inativa">Inativa</option>
              <option value="Manuten√ß√£o">Manuten√ß√£o</option>
            </select>
          </div>
          <button type="submit" id="placaCadastrarBtn" class="btn-primary" disabled>
            <i class="fas fa-plus"></i> Cadastrar
          </button>
          <small id="placaSuccess" class="field-success" hidden>Placa cadastrada com sucesso.</small>
        </form>
        <table id="placaTable">
          <thead>
            <tr><th>Nome</th><th>Pot√™ncia</th><th>Status</th><th>A√ß√µes</th></tr>
          </thead>
          <tbody></tbody>
        </table>
      </section>

      <!-- ALERTAS -->
      <section id="section-alertas" hidden>
        <h2>üö® Alertas</h2>
        <table id="alertsTable">
          <thead>
            <tr><th>Data</th><th>Tipo</th><th>Descri√ß√£o</th><th>N√≠vel</th><th data-col="actions">A√ß√µes</th></tr>
          </thead>
          <tbody></tbody>
        </table>
  <button id="clearAlerts" class="btn-limpar">üóë Limpar</button>
      </section>

      <!-- USU√ÅRIOS -->
      <section id="section-usuarios" hidden>
        <h2 style="margin-bottom:2rem;"><i class="fas fa-users"></i> Usu√°rios</h2>
        <div class="grid large">
          <div class="card config-card">
            <div class="card-header">
              <h3><i class="fas fa-users-cog"></i> Gerenciamento de Usu√°rios</h3>
            </div>
            <div class="config-fields">
              <div class="config-field">
                <label for="addUser"><i class="fas fa-user-plus"></i> Adicionar Usu√°rio</label>
                <input type="text" id="addUser" placeholder="Nome ou e-mail">
                <button id="addUserBtn" class="btn-primary"><i class="fas fa-plus"></i> Adicionar</button>
              </div>
              <div class="config-field">
                <label for="removeUser"><i class="fas fa-user-minus"></i> Remover Usu√°rio</label>
                <input type="text" id="removeUser" placeholder="Nome ou e-mail">
                <button id="removeUserBtn" class="btn-danger" style="background:#e63946;color:#fff;"><i class="fas fa-minus"></i> Remover</button>
              </div>
              <div class="config-field" style="margin-top:1.2rem;">
                <label><i class="fas fa-users"></i> Usu√°rios cadastrados</label>
                <input type="text" id="userSearch" placeholder="Buscar por nome ou e-mail" />
                <ul id="userList" style="margin:0.5rem 0 0 0; padding-left:1.2rem; color:#00d4ff; font-weight:500;"></ul>
              </div>
              <div class="config-field">
                <label for="userPermSelect"><i class="fas fa-user-shield"></i> Permiss√£o do Usu√°rio</label>
                <select id="userPermSelect">
                  <option value="admin">Administrador</option>
                  <option value="viewer">Visualizador</option>
                </select>
                <button id="setPermBtn" class="btn-secondary"><i class="fas fa-check"></i> Definir Permiss√£o</button>
                <input type="text" id="permUserName" placeholder="Nome ou e-mail do usu√°rio" style="margin-top:0.5rem;">
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- CONFIGURA√á√ïES -->
      <section id="section-configuracoes" hidden>
        <h2 style="margin-bottom:2rem;"><i class="fas fa-cogs"></i> Configura√ß√µes</h2>
        <div class="grid large">
          <div class="card config-card">
            <div class="card-header">
              <h3><i class="fas fa-solar-panel"></i> Par√¢metros da Placa</h3>
            </div>
            <div class="config-fields">
              <div class="config-field">
                <label for="plantCapacity"><i class="fas fa-battery-full"></i> Capacidade Total</label>
                <input type="number" id="plantCapacity" value="8" min="0" step="0.1">
                <span class="config-unit">kWp</span>
              </div>
              <div class="config-field">
                <label for="tariff"><i class="fas fa-dollar-sign"></i> Tarifa</label>
                <input type="number" id="tariff" value="0.95" step="0.01" min="0">
                <span class="config-unit">R$/kWh</span>
              </div>
              <button id="saveSettings" class="btn-primary"><i class="fas fa-save"></i> Salvar</button>
            </div>
          </div>
          <div class="card config-card">
            <div class="card-header">
              <h3><i class="fas fa-sliders-h"></i> Limites de Opera√ß√£o</h3>
            </div>
            <div class="config-fields">
              <div class="config-field">
                <label for="minGen"><i class="fas fa-arrow-down"></i> M√≠nimo Gera√ß√£o</label>
                <input type="number" id="minGen" value="1" min="0" step="0.1">
                <span class="config-unit">kW</span>
              </div>
              <div class="config-field">
                <label for="maxDelta"><i class="fas fa-arrow-up"></i> Delta M√°ximo</label>
                <input type="number" id="maxDelta" value="3" min="0" step="0.1">
                <span class="config-unit">kW</span>
              </div>
              <button id="saveThresholds" class="btn-primary"><i class="fas fa-save"></i> Salvar Limites</button>
            </div>
          </div>
            <!-- Prefer√™ncias do Usu√°rio -->
            <div class="card config-card">
              <div class="card-header">
                <h3><i class="fas fa-user-cog"></i> Prefer√™ncias do Usu√°rio</h3>
              </div>
              <div class="config-fields">
                <div class="config-field">
                  <label for="themeSelect"><i class="fas fa-paint-brush"></i> Tema</label>
                  <select id="themeSelect">
                    <option value="light">Claro</option>
                    <option value="dark">Escuro</option>
                  </select>
                </div>
                <div class="config-field">
                  <label for="langSelect"><i class="fas fa-language"></i> Idioma</label>
                  <select id="langSelect">
                    <option value="pt">Portugu√™s</option>
                    <option value="en">English</option>
                  </select>
                </div>
              </div>
            </div>
            <!-- Notifica√ß√µes -->
            <div class="card config-card">
              <div class="card-header">
                <h3><i class="fas fa-bell"></i> Notifica√ß√µes</h3>
              </div>
              <div class="config-fields">
                <div class="config-field">
                  <label for="emailNotify"><i class="fas fa-envelope"></i> E-mail</label>
                  <input type="email" id="emailNotify" placeholder="Seu e-mail">
                </div>
                <div class="config-field">
                  <label for="smsNotify"><i class="fas fa-mobile-alt"></i> SMS</label>
                  <input type="text" id="smsNotify" placeholder="Seu n√∫mero">
                </div>
                <div class="config-field">
                  <label><input type="checkbox" id="alertLowGen"> Alertar gera√ß√£o baixa</label>
                </div>
                <button id="saveNotifications" class="btn-primary" style="margin-top:0.8rem;"><i class="fas fa-save"></i> Salvar</button>
              </div>
            </div>
            <!-- Backup/Restaura√ß√£o (movido para baixo) -->
            <div class="card config-card">
              <div class="card-header">
                <h3><i class="fas fa-database"></i> Backup & Restaura√ß√£o</h3>
              </div>
              <div class="config-fields">
                <button id="backupBtn" class="btn-secondary" aria-label="Fazer Backup" title="Fazer Backup"><i class="fas fa-download"></i></button>
                <button id="restoreBtn" class="btn-secondary" aria-label="Restaurar" title="Restaurar"><i class="fas fa-upload"></i></button>
              </div>
            </div>
        </div>
      </section>
    </main>

    

    <footer>
      <footer style="width:100%; position:fixed; left:0; bottom:0; background:#1e1e2f; color:#00d4ff; text-align:center; padding:1rem 0; font-size:1.1rem; letter-spacing:0.5px; z-index:999;">
    <span style="font-weight:600;">SmartSolar ¬© <span id="year"></span> - Todos os direitos reservados</span>
    <script>
      // Mostrar rodap√© apenas ao chegar no final da p√°gina
      document.addEventListener('DOMContentLoaded', function() {
        const footer = document.querySelector('footer');
        footer.style.display = 'none';
        window.addEventListener('scroll', function() {
          if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 2) {
            footer.style.display = 'block';
          } else {
            footer.style.display = 'none';
          }
        });
      });
    </script>
  </footer>
  </div>

  <!-- Modal Perfil -->
  <div id="profileModal" class="modal" style="display:flex;flex-direction:column;align-items:center;justify-content:center;gap:14px;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9999;">
      <span id="closeProfile" class="close">&times;</span>
      <div id="profileView">
        <div class="profile-header">
          <img id="userProfileImg" src="https://ui-avatars.com/api/?name=Usuario&background=00d4ff&color=fff" alt="Usu√°rio" style="width:80px;height:80px;border-radius:50%;object-fit:cover;">
          <h3>Perfil do Usu√°rio</h3>
        </div>
        <div class="profile-details">
          <p><strong>Nome:</strong> <span id="profileName">Usu√°rio</span></p>
          <p><strong>Email:</strong> <span id="profileEmail">user@email.com</span></p>
          <p><strong>Status:</strong> <span id="profileStatus">Ativo</span></p>
          <p><strong>√öltimo acesso:</strong> <span>16/09/2023 14:30</span></p>
        </div>
        <button id="editProfileBtn" class="btn-primary">Editar Perfil</button>
      </div>
  <div id="profileEdit" class="hidden" style="padding: 24px 16px; background: #23243a; border-radius: 16px; box-shadow: 0 2px 16px rgba(0,0,0,0.18); max-width: 420px; width: 100%; margin: 0 auto;">
  <h3 style="text-align:center; color:#00d4ff; font-weight:600; margin-bottom:18px;">Editar Perfil</h3>
        <div class="form-group" style="display:flex; flex-direction:column; align-items:center; margin-bottom:18px;">
          <label style="font-weight:500; margin-bottom:6px; color:#fff;">Foto de Perfil:</label>
          <img id="previewProfileImg" src="https://ui-avatars.com/api/?name=Usuario&background=00d4ff&color=fff" alt="Pr√©via da foto" style="width:90px;height:90px;border-radius:50%;object-fit:cover;margin-bottom:10px;box-shadow:0 2px 8px rgba(0,0,0,0.10);">
          <input type="file" id="editProfileImg" accept="image/*" style="margin-top:4px;">
        </div>
        <div class="form-group" style="margin-bottom:14px;">
          <label style="font-weight:500; color:#fff;">Nome:</label>
          <input type="text" id="editName" placeholder="Nome" style="width:100%;padding:8px;border-radius:6px;border:1px solid #444;background:#23243a;color:#fff;">
        </div>
        <div class="form-group" style="margin-bottom:14px;">
          <label style="font-weight:500; color:#fff;">Email:</label>
          <input type="email" id="editEmail" placeholder="Email" style="width:100%;padding:8px;border-radius:6px;border:1px solid #444;background:#23243a;color:#fff;">
        </div>
        <div class="form-group" style="margin-bottom:18px;">
          <label style="font-weight:500; color:#fff;">Status:</label>
          <select id="editStatus" style="width:100%;padding:8px;border-radius:6px;border:1px solid #444;background:#23243a;color:#fff;">
            <option>Ativo</option>
            <option>Inativo</option>
          </select>
        </div>
        <div class="form-actions" style="display:flex; justify-content:space-between; gap:10px;">
          <button id="saveProfile" class="btn-primary" style="flex:1; background:#00d4ff; color:#fff; border:none; border-radius:6px; padding:10px 0; font-weight:600; cursor:pointer;">Salvar</button>
          <button id="cancelEdit" class="btn-secondary" style="flex:1; background:#e0e0e0; color:#333; border:none; border-radius:6px; padding:10px 0; font-weight:500; cursor:pointer;">Cancelar</button>
        </div>
      </div>
    </div>
  </div>

  <script src="src/scripts/api-base.js"></script>
  <script src="src/scripts/remote.js"></script>
  <script src="src/scripts/dashboard.js"></script>
  <script>
    // Modal Perfil: garantir que s√≥ a visualiza√ß√£o aparece ao abrir
    document.addEventListener('DOMContentLoaded', function() {
      var profileModal = document.getElementById('profileModal');
      var profileView = document.getElementById('profileView');
      var profileEdit = document.getElementById('profileEdit');
      var editProfileBtn = document.getElementById('editProfileBtn');
      var cancelEditBtn = document.getElementById('cancelEdit');
      var userMenu = document.getElementById('userMenu');
      var closeProfile = document.getElementById('closeProfile');

      function showView() {
        // Exibe apenas a visualiza√ß√£o
        profileView.classList.remove('hidden');
        profileEdit.classList.add('hidden');
      }
      function showEdit() {
        // Mant√©m a visualiza√ß√£o e mostra o card de edi√ß√£o logo abaixo
        profileView.classList.remove('hidden');
        profileEdit.classList.remove('hidden');
        // Garante que o edit fique logo abaixo do perfil
        if (profileView.nextElementSibling !== profileEdit) {
          profileView.parentNode.insertBefore(profileEdit, profileView.nextSibling);
        }
      }

      // Ao abrir o modal, mostrar apenas a visualiza√ß√£o
      userMenu.addEventListener('click', function() {
        profileModal.style.display = 'block';
        showView();
      });

      // Bot√£o editar perfil
      editProfileBtn.addEventListener('click', function() {
        showEdit();
      });

      // Bot√£o cancelar edi√ß√£o
      cancelEditBtn.addEventListener('click', function(e) {
        e.preventDefault();
        showView();
      });

      // Fechar modal
      closeProfile.addEventListener('click', function() {
        profileModal.style.display = 'none';
        showView();
      });
      // Fechar ao clicar fora do modal
      window.onclick = function(event) {
        if (event.target == profileModal) {
          profileModal.style.display = 'none';
          showView();
        }
      };
    });
  </script>
  <!-- Minimal Ticket FAB (bottom-right) -->
  <button id="openTicketFab" class="ticket-fab" aria-label="Abrir chamado" title="Abrir chamado">
    <span id="ticketFabBadge" class="badge" aria-hidden="true"></span>
    <i class="fas fa-ticket-alt" aria-hidden="true"></i>
  </button>

    
  
</body>
</html>